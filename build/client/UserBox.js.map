{"version":3,"sources":["../../client/UserBox.js"],"names":["UserBox","state","user","loggedIn","loggedInFn","bind","addListener","removeListener","console","log","setState","e","ajax","url","method","contentType","data","JSON","stringify","on","window","location","send","preventDefault","props","textAlign","username","logOut","width","Component"],"mappings":";;;;;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;;;;;;;IAEqBA,O;;;;;;;;+JACnBC,K,GAAQ;AACNC,YAAM,EAACC,UAAU,KAAX;AADA,K;;;;;yCAIa;AACnB,WAAKC,UAAL,GAAkB,KAAKD,QAAL,CAAcE,IAAd,CAAmB,IAAnB,CAAlB;AACA,qBAAKC,WAAL,CAAiB,KAAKF,UAAtB;AACD;;;2CAEsB;AACrB,qBAAKG,cAAL,CAAoB,KAAKH,UAAzB;AACD;;;6BAEQH,K,EAAO;AACdO,cAAQC,GAAR,CAAYR,KAAZ;AACA,WAAKS,QAAL,CAAc;AACZR,cAAMD;AADM,OAAd;AAGD;;;2BAEMU,C,EAAG;;AAER,UAAIC,OAAO,yBACT;AACEC,aAAK,aADP;AAEEC,gBAAQ,MAFV;AAGEC,qBAAa,kBAHf;AAIEC,cAAMC,KAAKC,SAAL,CAAe,EAAf;AAJR,OADS,CAAX;;AASAN,WAAKO,EAAL,CAAQ,SAAR,EAAmB,UAACR,CAAD,EAAO;AACxBS,eAAOC,QAAP,GAAkB,GAAlB;AACD,OAFD;;AAIAT,WAAKO,EAAL,CAAQ,OAAR,EAAiB,YAAM,CACtB,CADD;;AAGAP,WAAKU,IAAL;;AAEAX,QAAEY,cAAF;AAED;;;6BAEQ;AACPf,cAAQC,GAAR,CAAY,KAAKe,KAAjB;AACA,aAAO;AAAA;AAAA,UAAK,WAAU,KAAf;AACH,aAAKvB,KAAL,CAAWC,IAAX,CAAgBC,QAAhB,GACA;AAAA;AAAA;AACE;AAAA;AAAA,cAAK,WAAU,UAAf;AACE,qDADF;AAEM;AAAA;AAAA,gBAAK,WAAU,YAAf,EAA4B,OAAO,EAACsB,WAAW,OAAZ,EAAnC;AAAA;AAAkE;AAAA;AAAA;AAAS,qBAAKxB,KAAL,CAAWC,IAAX,CAAgBwB;AAAzB,eAAlE;AACE;AAAA;AAAA;AAAG;AAAA;AAAA,oBAAG,MAAK,GAAR,EAAY,SAAS,KAAKC,MAAL,CAAYtB,IAAZ,CAAiB,IAAjB,CAArB;AAAA;AAAA;AAAH;AADF;AAFN,WADF;AAQE;AAAA;AAAA,cAAK,WAAU,UAAf;AACE,qDADF;AAEE;AAAA;AAAA,gBAAM,IAAG,OAAT,EAAiB,WAAU,iBAA3B,EAA6C,OAAO,EAACuB,OAAO,MAAR,EAApD;AAAA;AAAA;AAFF;AARF,SADA,GAiBA;AAAA;AAAA,YAAK,WAAU,WAAf;AACI,mDADJ;AAEE;AAAA;AAAA,cAAK,WAAU,YAAf;AAAA;AAA6B;AAAA;AAAA,gBAAM,IAAG,QAAT;AAAA;AAAA,aAA7B;AAAA;AAA8D;AAAA;AAAA,gBAAM,IAAG,QAAT;AAAA;AAAA,aAA9D;AAAA;AAAA;AAFF;AAlBG,OAAP;AAwBD;;;;EAvEkC,gBAAMC,S;;kBAAtB7B,O","file":"UserBox.js","sourcesContent":["\nimport React from 'react';\nimport Ajax from 'simple-ajax';\n\nimport User from './User';\n\nimport { Link } from 'react-router';\n\nexport default class UserBox extends React.Component {\n  state = {\n    user: {loggedIn: false}\n  };\n\n  componentWillMount() {\n    this.loggedInFn = this.loggedIn.bind(this);\n    User.addListener(this.loggedInFn);\n  }\n\n  componentWillUnmount() {\n    User.removeListener(this.loggedInFn);\n  }\n\n  loggedIn(state) {\n    console.log(state);\n    this.setState({\n      user: state\n    });\n  }\n\n  logOut(e) {\n\n    var ajax = new Ajax(\n      {\n        url: '/api/logout',\n        method: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify({})\n      }\n    );\n\n    ajax.on('success', (e) => {\n      window.location = '/';\n    });\n\n    ajax.on('error', () => {\n    });\n\n    ajax.send();\n\n    e.preventDefault();\n\n  }\n\n  render() {\n    console.log(this.props)\n    return <div className=\"row\">\n      { this.state.user.loggedIn ?\n        <div>\n          <div className=\"col-xs-8\">\n            <br />\n                <div className=\"pull-right\" style={{textAlign: \"right\"}}>Welcome, <strong>{this.state.user.username}</strong>\n                  <p><a href=\"#\" onClick={this.logOut.bind(this)}>Logout</a></p>\n                  {/*<p><Link to=\"/notif\">0 Notifications</Link></p>*/}\n                </div>\n          </div>\n          <div className=\"col-xs-4\">\n            <br />\n            <Link to=\"/post\" className=\"btn btn-success\" style={{width: \"100%\"}}>\n              + Post\n            </Link>\n          </div>\n        </div>\n        :\n        <div className=\"col-xs-12\">\n            <br />\n          <div className=\"pull-right\"> <Link to=\"/login\">Login</Link> / <Link to=\"/login\">Register</Link> </div>\n        </div>\n      }\n    </div>\n  }\n}"]}