{"version":3,"sources":["../../client/ItemBox.js"],"names":["ItemBox","state","comments","loadComments","ajax","url","props","post","_id","method","contentType","on","e","console","log","target","response","res","JSON","parse","success","setState","error","err","loading","send","fontWeight","user","username","title","description","color","fontSize","price","Component"],"mappings":";;;;;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;;;;;;;IAEqBA,O;;;;;;;;+JAEnBC,K,GAAQ;AACNC,gBAAU;AADJ,K;;;;;wCAIY;AAClB,WAAKC,YAAL;AACD;;;mCAEc;AAAA;;AACb,UAAIC,OAAO,yBACT;AACEC,aAAK,mBAAmB,KAAKC,KAAL,CAAWC,IAAX,CAAgBC,GAD1C;AAEEC,gBAAQ,KAFV;AAGEC,qBAAa;AAHf,OADS,CAAX;;AAQAN,WAAKO,EAAL,CAAQ,SAAR,EAAmB,UAACC,CAAD,EAAO;AACxBC,gBAAQC,GAAR,CAAYF,EAAEG,MAAF,CAASC,QAArB;;AAEA,YAAIC,MAAMC,KAAKC,KAAL,CAAWP,EAAEG,MAAF,CAASC,QAApB,CAAV;;AAEA,YAAIC,IAAIG,OAAR,EAAiB;AACf,iBAAKC,QAAL,CAAc;AACZnB,sBAAUe,IAAIf;AADF,WAAd;AAGD,SAJD,MAIO;AACL,iBAAKmB,QAAL,CAAc;AACZC,mBAAOL,IAAIM;AADC,WAAd;AAGD;AACF,OAdD;;AAgBAnB,WAAKO,EAAL,CAAQ,OAAR,EAAiB,YAAM;AACrB,eAAKU,QAAL,CAAc;AACZC,iBAAO,YADK;AAEZE,mBAAS;AAFG,SAAd;AAID,OALD;;AAOApB,WAAKqB,IAAL;AACD;;;6BAEQ;AACP,aAAO;AAAA;AAAA,UAAK,WAAU,qBAAf;AACL;AAAA;AAAA,YAAK,WAAU,YAAf;AACE;AAAA;AAAA,cAAG,OAAO,EAACC,YAAY,MAAb,EAAV;AAAiC,iBAAKpB,KAAL,CAAWC,IAAX,CAAgBoB,IAAhB,CAAqBC;AAAtD;AADF,SADK;AAIL,8DAAY,KAAK,YAAY,KAAKtB,KAAL,CAAWC,IAAX,CAAgBC,GAA7C,GAJK;AAKL;AAAA;AAAA,YAAK,WAAU,YAAf;AACE;AAAA;AAAA,cAAK,WAAU,KAAf;AACE;AAAA;AAAA,gBAAK,WAAU,UAAf;AACE;AAAA;AAAA;AAAK,qBAAKF,KAAL,CAAWC,IAAX,CAAgBsB;AAArB,eADF;AAEE;AAAA;AAAA;AAAI,qBAAKvB,KAAL,CAAWC,IAAX,CAAgBuB;AAApB;AAFF,aADF;AAKE;AAAA;AAAA,gBAAK,WAAU,UAAf;AACE;AAAA;AAAA,kBAAG,OAAO,EAACJ,YAAY,MAAb,EAAqBK,OAAO,OAA5B,EAAqCC,UAAU,MAA/C,EAAV;AAAA;AAAoE,qBAAK1B,KAAL,CAAWC,IAAX,CAAgB0B;AAApF,eADF;AAEE;AAAA;AAAA;AAAG;AAAA;AAAA,oBAAM,IAAI,WAAW,KAAK3B,KAAL,CAAWC,IAAX,CAAgBC,GAArC,EAA0C,WAAU,iBAApD;AAAA;AAAA;AAAH;AAFF;AALF,WADF;AAWE,mDAXF;AAYE;AAAA;AAAA,cAAK,WAAU,KAAf;AACE;AAAA;AAAA,gBAAK,WAAU,WAAf;AACE,kEAAU,UAAU,KAAKP,KAAL,CAAWC,QAA/B;AADF;AADF;AAZF;AALK,OAAP;AAwBD;;;;EAtEkC,gBAAMgC,S;;kBAAtBlC,O","file":"ItemBox.js","sourcesContent":["\nimport React from 'react';\nimport Ajax from 'simple-ajax';\n\nimport SmartImage from './SmartImage';\nimport Comments from './Comments';\n\nimport { Link } from 'react-router';\n\nexport default class ItemBox extends React.Component {\n\n  state = {\n    comments: []\n  }\n\n  componentDidMount() {\n    this.loadComments();\n  }\n\n  loadComments() {\n    var ajax = new Ajax(\n      {\n        url: '/api/comments/' + this.props.post._id,\n        method: 'GET',\n        contentType: 'application/json'\n      }\n    );\n\n    ajax.on('success', (e) => {\n      console.log(e.target.response);\n\n      var res = JSON.parse(e.target.response);\n\n      if (res.success) {\n        this.setState({\n          comments: res.comments\n        });\n      } else {\n        this.setState({\n          error: res.err\n        });\n      }\n    });\n\n    ajax.on('error', () => {\n      this.setState({\n        error: \"Ajax Error\",\n        loading: false\n      });\n    });\n\n    ajax.send();\n  }\n\n  render() {\n    return <div className=\"panel panel-default\">\n      <div className=\"panel-body\">\n        <p style={{fontWeight: \"bold\"}}>{this.props.post.user.username}</p>\n      </div>\n      <SmartImage src={\"/image/\" + this.props.post._id} />\n      <div className=\"panel-body\">\n        <div className=\"row\">\n          <div className=\"col-xs-8\">\n            <h4>{this.props.post.title}</h4>\n            <p>{this.props.post.description}</p>\n          </div>\n          <div className=\"col-xs-4\">\n            <p style={{fontWeight: \"bold\", color: \"green\", fontSize: \"18pt\"}}>${this.props.post.price}</p>\n            <p><Link to={\"/item/\" + this.props.post._id} className=\"btn btn-default\">Contact</Link></p>\n          </div>\n        </div>\n        <hr />\n        <div className=\"row\">\n          <div className=\"col-xs-12\">\n            <Comments comments={this.state.comments} />\n          </div>\n        </div>\n      </div>\n    </div>\n  }\n}"]}